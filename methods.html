<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>í›ˆë ¨ë²• ê°€ì´ë“œ</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: var(--tg-theme-bg-color, #ffffff);
    --text: var(--tg-theme-text-color, #000000);
    --hint: var(--tg-theme-hint-color, #999999);
    --link: var(--tg-theme-link-color, #2678b6);
    --btn: var(--tg-theme-button-color, #2678b6);
    --btn-text: var(--tg-theme-button-text-color, #ffffff);
    --secondary-bg: var(--tg-theme-secondary-bg-color, #f0f0f0);
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--secondary-bg);
    color: var(--text);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }
  .container { max-width: 480px; margin: 0 auto; padding: 16px; }

  .page-title { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
  .page-sub { font-size: 13px; color: var(--hint); margin-bottom: 16px; }

  /* Method nav pills */
  .method-nav { display: flex; gap: 6px; overflow-x: auto; padding-bottom: 12px; -webkit-overflow-scrolling: touch; }
  .method-nav::-webkit-scrollbar { display: none; }
  .nav-pill {
    flex-shrink: 0; padding: 6px 14px; border-radius: 20px; font-size: 13px; font-weight: 500;
    background: var(--bg); color: var(--hint); border: 1px solid var(--secondary-bg);
    cursor: pointer; transition: all 0.2s; -webkit-tap-highlight-color: transparent;
  }
  .nav-pill.active { background: var(--btn); color: var(--btn-text); border-color: var(--btn); }

  /* Method detail card */
  .method-detail { display: none; animation: fadeIn 0.3s ease; }
  .method-detail.active { display: block; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }

  .card { background: var(--bg); border-radius: 14px; padding: 16px; margin-bottom: 12px; }

  .method-header { margin-bottom: 12px; }
  .method-name { font-size: 18px; font-weight: 700; }
  .method-author { font-size: 13px; color: var(--hint); margin-top: 2px; }
  .method-tagline { font-size: 14px; color: var(--link); font-weight: 500; margin-top: 6px; line-height: 1.4; }

  .method-level {
    display: inline-flex; align-items: center; gap: 4px;
    font-size: 11px; font-weight: 600; padding: 3px 10px; border-radius: 12px; margin-top: 8px;
  }
  .level-beginner { background: #dcfce7; color: #15803d; }
  .level-intermediate { background: #fef9c3; color: #a16207; }
  .level-advanced { background: #fee2e2; color: #b91c1c; }

  .section-title { font-size: 14px; font-weight: 700; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
  .section-title .icon { font-size: 16px; }

  .info-row { display: flex; gap: 8px; margin-bottom: 12px; }
  .info-box {
    flex: 1; padding: 10px; border-radius: 10px; background: var(--secondary-bg); text-align: center;
  }
  .info-box-label { font-size: 10px; color: var(--hint); font-weight: 500; }
  .info-box-value { font-size: 14px; font-weight: 700; margin-top: 2px; }

  .desc-text { font-size: 13px; line-height: 1.6; color: var(--text); }
  .desc-text strong { font-weight: 600; }

  .workout-list { list-style: none; display: flex; flex-direction: column; gap: 8px; }
  .workout-item {
    padding: 10px 12px; border-radius: 10px; background: var(--secondary-bg);
    font-size: 13px; line-height: 1.5;
  }
  .workout-item strong { font-weight: 600; }

  .start-tip {
    padding: 12px 14px; border-radius: 10px; background: rgba(34,197,94,0.08);
    border-left: 3px solid #22c55e; font-size: 13px; line-height: 1.5;
  }

  .pace-guide {
    padding: 12px 14px; border-radius: 10px; background: rgba(38,120,182,0.06);
    font-size: 13px; line-height: 1.6;
  }

  .ref-text { font-size: 12px; color: var(--hint); margin-top: 8px; }

  .diff-text { font-size: 13px; line-height: 1.6; color: var(--text); padding: 10px 12px; background: var(--secondary-bg); border-radius: 10px; }

  .select-btn-wrap { padding: 0 0 12px; }
  .select-btn {
    display: block; width: 100%; padding: 14px 0;
    border: none; border-radius: 12px;
    background: var(--btn); color: var(--btn-text);
    font-family: inherit; font-size: 15px; font-weight: 600;
    cursor: pointer; -webkit-tap-highlight-color: transparent;
  }
  .select-btn:active { opacity: 0.8; }
  .select-btn:disabled { opacity: 0.5; cursor: default; }
  .select-btn.loading { color: transparent; position: relative; }
  .select-btn.loading::after {
    content: ''; position: absolute; left: 50%; top: 50%;
    width: 20px; height: 20px; margin: -10px 0 0 -10px;
    border: 2px solid var(--btn-text); border-top-color: transparent;
    border-radius: 50%; animation: spin 0.6s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>
<div class="container">
  <div class="page-title">í›ˆë ¨ë²• ê°€ì´ë“œ</div>
  <div class="page-sub">ë‚˜ì—ê²Œ ë§ëŠ” í›ˆë ¨ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”</div>

  <div class="method-nav" id="method-nav"></div>
  <div id="method-content"></div>
</div>

<script>
var tg = window.Telegram && window.Telegram.WebApp;
if (tg) {
  tg.ready();
  tg.expand();
  if (tg.BackButton) {
    tg.BackButton.show();
    tg.BackButton.onClick(function() {
      if (window.history.length > 1) { window.history.back(); }
      else { tg.close(); }
    });
  }
}

var userId = null;
if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) userId = tg.initDataUnsafe.user.id;

var selecting = false;
function selectMethod(methodId) {
  if (selecting || !userId) return;
  selecting = true;
  var btn = document.getElementById('select-btn');
  if (btn) { btn.disabled = true; btn.classList.add('loading'); }

  // Fire-and-forget: ì„œë²„ ì²˜ë¦¬(ê³„íš ìƒì„± ë“±)ê°€ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ
  // keepalive: true â†’ í˜ì´ì§€ ë‹«í˜€ë„ ìš”ì²­ì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì™„ë£Œë¨
  fetch('https://dotsosqsftympgdescvz.supabase.co/functions/v1/running-coach', {
    method: 'POST', headers: {'Content-Type':'application/json'},
    body: JSON.stringify({ mode:'webapp_command', command:'select_method:'+methodId, telegram_user_id:userId }),
    keepalive: true,
  }).catch(function() {});

  // ì¦‰ì‹œ ì„±ê³µ í‘œì‹œ â†’ ê²°ê³¼ëŠ” í…”ë ˆê·¸ë¨ ì±„íŒ…ì—ì„œ í™•ì¸
  setTimeout(function() {
    if (tg && tg.showPopup) {
      tg.showPopup({message:'ì ìš© ì™„ë£Œ! ì±„íŒ…ì—ì„œ í™•ì¸í•˜ì„¸ìš”',buttons:[{type:'ok'}]}, function(){ tg.close(); });
    } else if (tg) {
      tg.close();
    }
  }, 300);
}

var METHODS = [
  {
    id: 'galloway', name: 'ê°¤ëŸ¬ì›¨ì´', author: 'Jeff Galloway',
    tagline: 'ë‹¬ë¦¬ê¸°+ê±·ê¸°ë¥¼ ë²ˆê°ˆì•„ì„œ! ì˜¤ëŠ˜ ë‹¹ì¥ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”.',
    level: 'beginner', levelLabel: 'ì…ë¬¸',
    conditions: { ctl: '0~15', weeklyKm: '0~20km', freq: 'ì£¼ 1~3íšŒ' },
    core: 'ë‹¬ë¦¬ê¸°ì™€ ê±·ê¸°ë¥¼ ê·œì¹™ì ìœ¼ë¡œ êµëŒ€ (ì˜ˆ: 4ë¶„ ë‹¬ë¦¬ê¸° + 1ë¶„ ê±·ê¸°). ê±·ê¸° êµ¬ê°„ì´ íšŒë³µ ì—­í• ì„ í•˜ë©´ì„œ ë¶€ìƒ ìœ„í—˜ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.',
    weeklyStructure: 'Run/Walk 2íšŒ (30~45ë¶„) + ë¡± Run/Walk 1íšŒ (45~60ë¶„)',
    workouts: [
      '<strong>Run/Walk ë¹„ìœ¨</strong> ì ì§„ì  ë³€ê²½: 4:1 â†’ 5:1 â†’ 8:1 â†’ ì—°ì† ëŸ¬ë‹',
    ],
    paceGuide: 'ê±·ê¸° êµ¬ê°„ì´ íšŒë³µ ì—­í• . ë‹¬ë¦¬ê¸° êµ¬ê°„ì€ ëŒ€í™” ê°€ëŠ¥í•œ ì†ë„. ì‹¬ë°• Z1~Z2.',
    startTip: '30ë¶„ ì‚°ì±… ì¤‘ 5ë¶„ë§ˆë‹¤ 1ë¶„ ì¡°ê¹… ì‚½ì… (1ë¶„ ë‹¬ë¦¬ê¸° + 4ë¶„ ê±·ê¸° x 6ì„¸íŠ¸)',
    diff: 'ì™„ì „ ì´ˆë³´ë„ ì²« ë‚ ë¶€í„° ì‹œì‘ ê°€ëŠ¥. ê±·ê¸°ê°€ ë¶€ìƒì„ ì˜ˆë°©í•˜ë©´ì„œë„ ì§€êµ¬ë ¥ í–¥ìƒ.',
    ref: 'Marathon: You Can Do It!'
  },
  {
    id: 'maf', name: 'MAF ì €ì‹¬ë°•', author: 'Phil Maffetone',
    tagline: 'ì‹¬ë°•ìˆ˜ í•˜ë‚˜ë§Œ ì§€í‚¤ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ë¹¨ë¼ì ¸ìš”.',
    level: 'beginner', levelLabel: 'ì…ë¬¸~ì¤‘ê¸‰',
    conditions: { ctl: '0~25', weeklyKm: '10km+', freq: 'ì£¼ 2íšŒ+' },
    core: '180-ë‚˜ì´ ê³µì‹ìœ¼ë¡œ MAF ì‹¬ë°•ìˆ˜ ì„¤ì • (ì˜ˆ: 35ì„¸ â†’ 145bpm), ê·¸ ì´í•˜ë¡œë§Œ í›ˆë ¨. ì†ë„ê°€ ì•„ë‹Œ ì‹¬ë°•ìˆ˜ê°€ ê¸°ì¤€ì…ë‹ˆë‹¤.',
    weeklyStructure: 'MAFëŸ° 3íšŒ (ì „ë¶€ MAF ì‹¬ë°• ì´í•˜, 30~60ë¶„)',
    workouts: [
      '<strong>MAF í…ŒìŠ¤íŠ¸</strong> ë§¤ì›” 1íšŒ, ë™ì¼ ì½”ìŠ¤ì—ì„œ MAF ì‹¬ë°•ìœ¼ë¡œ ë‹¬ë ¤ í˜ì´ìŠ¤ ë³€í™” ì¶”ì ',
    ],
    paceGuide: '180-ë‚˜ì´ ì´í•˜ ì‹¬ë°•ë§Œ ì¤€ìˆ˜. ì˜¤ë¥´ë§‰ì—ì„œ ê±·ê¸°ë„ OK. í˜ì´ìŠ¤ ë¬´ì‹œ, ì‹¬ë°•ë§Œ!',
    startTip: '180-ë‚˜ì´ ì‹¬ë°•ìˆ˜ë¥¼ ì•ŒëŒ ì„¤ì •í•˜ê³ , ëª¨ë“  ëŸ¬ë‹ì„ ê·¸ ì´í•˜ë¡œë§Œ ë‹¬ë ¤ë³´ê¸°.',
    diff: 'ê°€ì¥ ë‹¨ìˆœí•œ ê·œì¹™ (ì‹¬ë°•ìˆ˜ í•˜ë‚˜). ìœ ì‚°ì†Œ ê¸°ì´ˆê°€ ìŒ“ì´ë©´ ê°™ì€ ì‹¬ë°•ì—ì„œ í˜ì´ìŠ¤ê°€ ë¹¨ë¼ì§.',
    ref: 'The Big Book of Endurance Training and Racing'
  },
  {
    id: 'hal_higdon', name: 'í•  íˆë“ ', author: 'Hal Higdon',
    tagline: 'ë§¤ì£¼ ì¡°ê¸ˆì”© ëŠ˜ë¦¬ëŠ” ê°€ì¥ ë”°ë¼í•˜ê¸° ì‰¬ìš´ í”„ë¡œê·¸ë¨.',
    level: 'beginner', levelLabel: 'ì…ë¬¸~ì¤‘ê¸‰',
    conditions: { ctl: '5~30', weeklyKm: '10~35km', freq: 'ì£¼ 3~4íšŒ' },
    core: 'Novice â†’ Intermediate â†’ Advanced ë‹¨ê³„ë³„ í”„ë¡œê·¸ë¨. ì „í†µì ì´ê³  ê²€ì¦ëœ ì ‘ê·¼ë²•ì…ë‹ˆë‹¤.',
    weeklyStructure: 'ì´ì§€ëŸ° 2íšŒ (ì§§ì€ ê±°ë¦¬) + í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹ 1íšŒ + ë¡±ëŸ° 1íšŒ',
    workouts: [
      '<strong>ë¡±ëŸ°</strong> ì ì§„ì  ì¦ê°€: ë§¤ì£¼ 1~2kmì”©. 12~18ì£¼ ì‚¬ì´í´ë¡œ ëª©í‘œ ë ˆì´ìŠ¤ ê±°ë¦¬ ë„ë‹¬',
    ],
    paceGuide: 'ì´ì§€ëŸ°ê³¼ ë¡±ëŸ° ëª¨ë‘ í¸ì•ˆí•œ í˜ì´ìŠ¤ (Z2). Intermediateë¶€í„° í…œí¬ëŸ° ì¶”ê°€.',
    startTip: 'ì£¼ 3íšŒ ëŸ¬ë‹ ì¤‘ 1íšŒë¥¼ "ë¡±ëŸ°"ìœ¼ë¡œ ì§€ì •í•˜ê³ , í‰ì†Œë³´ë‹¤ 2kmë§Œ ë” ë‹¬ë ¤ë³´ê¸°.',
    diff: 'ê°€ì¥ ë”°ë¼í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°. í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹ í¬í•¨. ë ˆë²¨ë³„ ëª…í™•í•œ ê°€ì´ë“œ ì œê³µ.',
    ref: 'Hal Higdon\'s Marathon Training'
  },
  {
    id: '80_20', name: '80/20 ëŸ¬ë‹', author: 'Matt Fitzgerald',
    tagline: 'ëŠë¦¬ê²Œ ë§ì´ ë›°ë©´ ë¹¨ë¼ì§„ë‹¤! 80%ëŠ” í¸í•˜ê²Œ, 20%ë§Œ ë¹¡ì„¸ê²Œ.',
    level: 'intermediate', levelLabel: 'ì¤‘ê¸‰',
    conditions: { ctl: '15+', weeklyKm: '20km+', freq: 'ì£¼ 3íšŒ+' },
    core: 'ì „ì²´ í›ˆë ¨ì˜ 80%ë¥¼ ì €ê°•ë„(Z1~Z2), 20%ë¥¼ ê³ ê°•ë„(Z4~Z5)ë¡œ ë°°ë¶„. Zone 3ëŠ” ìµœì†Œí™”í•©ë‹ˆë‹¤.',
    weeklyStructure: 'ì´ì§€ëŸ° Z2 2íšŒ + ë¡±ëŸ° Z2 1íšŒ + í…œí¬ or ì¸í„°ë²Œ 1íšŒ',
    workouts: [
      '<strong>í…œí¬ëŸ°</strong> Z4 20~40ë¶„ ì§€ì†',
      '<strong>í¬ë£¨ì¦ˆ ì¸í„°ë²Œ</strong> Z4 5~8ë¶„ x 3~5ì„¸íŠ¸',
      '<strong>Z2 ë¡±ëŸ°</strong> í¸ì•ˆí•œ í˜ì´ìŠ¤ë¡œ ì¥ê±°ë¦¬',
    ],
    paceGuide: 'ì´ì§€ëŸ°ì€ "ëŒ€í™” ê°€ëŠ¥í•œ í˜ì´ìŠ¤" (Z2). ê³ ê°•ë„ì¼ì€ Z4 ì—­ì¹˜ or Z5 ì¸í„°ë²Œ.',
    startTip: 'ì´ë²ˆ ì£¼ ëŸ¬ë‹ ì¤‘ 1íšŒë§Œ í…œí¬ëŸ° (20ë¶„ Z4)ìœ¼ë¡œ ë°”ê¾¸ê³ , ë‚˜ë¨¸ì§€ëŠ” ì „ë¶€ Z2.',
    diff: 'ê°€ì¥ ê³¼í•™ì  ê·¼ê±°ê°€ ë§ì€ ê°•ë„ ë°°ë¶„ë²•. "ëŠë¦¬ê²Œ ë§ì´ ë›°ë©´ ë¹¨ë¼ì§„ë‹¤"ì˜ ê³¼í•™ì  êµ¬í˜„.',
    ref: '80/20 Running'
  },
  {
    id: 'first', name: 'FIRST ëŸ°ë ˆìŠ¤', author: 'Furman Institute',
    tagline: 'ì£¼ 3ì¼ë§Œ ë¹¡ì„¸ê²Œ ë‹¬ë¦¬ê³ , ë‚˜ë¨¸ì§€ëŠ” ìì „ê±°Â·ìˆ˜ì˜ìœ¼ë¡œ!',
    level: 'intermediate', levelLabel: 'ì¤‘ê¸‰',
    conditions: { ctl: '20~35', weeklyKm: '20~40km', freq: 'ì£¼ 3íšŒ ëŸ¬ë‹+2íšŒ í¬ë¡œìŠ¤' },
    core: 'ì£¼ 3ì¼ë§Œ ê³ ê°•ë„ ëŸ¬ë‹(í…œí¬/ì¸í„°ë²Œ/ë¡±ëŸ°) + ì£¼ 2ì¼ í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹(ìì „ê±°/ìˆ˜ì˜). ì´ì§€ëŸ° ì—†ì´ ëª¨ë“  ëŸ¬ë‹ì´ ëª©ì  ëŸ¬ë‹ì…ë‹ˆë‹¤.',
    weeklyStructure: 'í…œí¬ëŸ° 1íšŒ + ì¸í„°ë²Œ 1íšŒ + ë¡±ëŸ° 1íšŒ + í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹ 2íšŒ',
    workouts: [
      '<strong>í…œí¬ëŸ°</strong> LT í˜ì´ìŠ¤ 3~5km ë°˜ë³µ',
      '<strong>íŠ¸ë™ ì¸í„°ë²Œ</strong> 400m~1600m ë°˜ë³µ',
      '<strong>ë¡±ëŸ°</strong> ëª©í‘œ ë ˆì´ìŠ¤ í˜ì´ìŠ¤ +30ì´ˆ/km',
    ],
    paceGuide: 'ì´ì§€ëŸ° ì—†ìŒ! ëª¨ë“  ëŸ¬ë‹ì´ ëª©ì  ëŸ¬ë‹ (T/I/R). í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹ì´ ìœ ì‚°ì†Œ ë² ì´ìŠ¤ ì—­í• .',
    startTip: 'ì£¼ ëŸ¬ë‹ ì¤‘ 1íšŒë¥¼ í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹ (ìì „ê±° 40ë¶„ Z2)ìœ¼ë¡œ êµì²´í•˜ê³ , ë‚˜ë¨¸ì§€ ëŸ¬ë‹ì€ ê°•ë„ ì˜¬ë¦¬ê¸°.',
    diff: '"ì ê²Œ ë›°ë˜ ë¹ ë¥´ê²Œ". ëŸ¬ë‹ 3íšŒë¼ ê´€ì ˆ ë¶€ë‹´â†“, í¬ë¡œìŠ¤íŠ¸ë ˆì´ë‹ìœ¼ë¡œ ìœ ì‚°ì†Œâ†‘. ì‹œê°„ íš¨ìœ¨ ìµœê³ .',
    ref: 'Run Less, Run Faster (Furman Institute)'
  },
  {
    id: 'jack_daniels', name: 'ì­ ë‹¤ë‹ˆì—˜ìŠ¤', author: 'Jack Daniels',
    tagline: 'ë‚´ ê¸°ë¡ì— ë”± ë§ëŠ” í›ˆë ¨ í˜ì´ìŠ¤ë¥¼ ê³„ì‚°í•´ì£¼ëŠ” ê³¼í•™ì  ì‹œìŠ¤í…œ.',
    level: 'intermediate', levelLabel: 'ì¤‘ê¸‰~ìƒê¸‰',
    conditions: { ctl: '25+', weeklyKm: '30km+', freq: 'ì£¼ 4íšŒ+' },
    core: 'VDOT ê¸°ë°˜ Easy(E) / Marathon(M) / Threshold(T) / Interval(I) / Repetition(R) 5ë‹¨ê³„ í˜ì´ìŠ¤ ì„¤ì •.',
    weeklyStructure: 'EëŸ° 2íšŒ + TëŸ° 1íšŒ + Iì„¸ì…˜ 1íšŒ + Eë¡±ëŸ° 1íšŒ',
    workouts: [
      '<strong>Tí˜ì´ìŠ¤ í¬ë£¨ì¦ˆ ì¸í„°ë²Œ</strong> 5~6ë¶„ x 4ì„¸íŠ¸',
      '<strong>Ií˜ì´ìŠ¤ ì¸í„°ë²Œ</strong> 3~5ë¶„ x 5ì„¸íŠ¸',
      '<strong>Rí˜ì´ìŠ¤ ë ˆí˜í‹°ì…˜</strong> 200~400m ë°˜ë³µ',
    ],
    paceGuide: 'VDOT í…Œì´ë¸”ë¡œ ëª¨ë“  í˜ì´ìŠ¤ ì‚°ì¶œ. EëŸ°ì€ 59~74% ê°•ë„, TëŸ°ì€ 83~88%.',
    startTip: 'ê°€ì¥ ìµœê·¼ 5km/10km ê¸°ë¡ìœ¼ë¡œ VDOT ê³„ì‚° í›„, Eí˜ì´ìŠ¤ë¥¼ ì •í•´ì„œ ì´ì§€ëŸ°ì— ì ìš©.',
    diff: 'ê°œì¸ ì²´ë ¥(VDOT)ì— ë§ì¶¤í™”ëœ ì •ë°€ í˜ì´ìŠ¤. 4ì£¼ê¸° ì£¼ê¸°í™” ì‹œìŠ¤í…œ.',
    ref: 'Daniels\' Running Formula'
  },
  {
    id: 'hansons', name: 'í•œìŠ¨', author: 'Hansons',
    tagline: 'ë§¤ì¼ ê¾¸ì¤€íˆ ë›°ë©´ ë§ˆë¼í†¤ í›„ë°˜ì´ ê°•í•´ì ¸ìš”.',
    level: 'intermediate', levelLabel: 'ì¤‘ê¸‰~ìƒê¸‰',
    conditions: { ctl: '25~40', weeklyKm: '40km+', freq: 'ì£¼ 5~6íšŒ' },
    core: 'ëˆ„ì  í”¼ë¡œ ì² í•™. ë¡±ëŸ° 26km ìƒí•œ. ì£¼ 6ì¼ ëŸ¬ë‹ìœ¼ë¡œ í”¼ë¡œë¥¼ ìŒ“ì•„ ë ˆì´ìŠ¤ í›„ë°˜ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.',
    weeklyStructure: 'EëŸ° 3íšŒ + ìŠ¤í”¼ë“œ(ì¸í„°ë²Œ) 1íšŒ + í…œí¬ 1íšŒ + ë¡±ëŸ° 1íšŒ. ì£¼ 1ì¼ íœ´ì‹',
    workouts: [
      '<strong>í…œí¬ëŸ°</strong> MP+10~20ì´ˆ í˜ì´ìŠ¤ x 10~16km',
      '<strong>ìŠ¤í”¼ë“œ</strong> 1km ì¸í„°ë²Œ x 6~12ì„¸íŠ¸',
      '<strong>ë¡±ëŸ°</strong> 26km ìƒí•œ, ëˆ„ì  í”¼ë¡œ ì†ì—ì„œ ì§„í–‰',
    ],
    paceGuide: 'ì´ì§€ëŸ°ì€ MPë³´ë‹¤ kmë‹¹ 45~90ì´ˆ ëŠë¦¬ê²Œ. í…œí¬ëŠ” MPë³´ë‹¤ 10~20ì´ˆ ëŠë¦¬ê²Œ.',
    startTip: 'ì£¼ 4íšŒ ëŸ¬ë„ˆë¼ë©´ 1íšŒ ì¶”ê°€ (ì‰¬ìš´ 30ë¶„)ë¡œ ë¹ˆë„ë¥¼ ë†’ì—¬ë³´ê¸°.',
    diff: 'ë¡±ëŸ° 32km+ ë¶ˆí•„ìš”. ë†’ì€ ë¹ˆë„ë¡œ ëˆ„ì  í”¼ë¡œë¥¼ ìŒ“ì•„ ë§ˆë¼í†¤ í›„ë°˜ë¶€ ê°•í•´ì§.',
    ref: 'Hansons Marathon Method'
  },
  {
    id: 'norwegian', name: 'ë…¸ë¥´ì›¨ì´', author: 'Marius Bakken / Ingebrigtsen',
    tagline: 'í•˜ë£¨ ë‘ ë²ˆ ì—­ì¹˜ í›ˆë ¨! ë…¸ë¥´ì›¨ì´ êµ­ê°€ëŒ€í‘œíŒ€ì˜ ìµœì‹  íŠ¸ë Œë“œ.',
    level: 'intermediate', levelLabel: 'ì¤‘ê¸‰~ìƒê¸‰',
    conditions: { ctl: '30~50', weeklyKm: '40~60km', freq: 'ì£¼ 5~6íšŒ' },
    core: 'ì´ì¤‘ ì—­ì¹˜(Double Threshold) â€” í•˜ë£¨ì— ì—­ì¹˜ ì„¸ì…˜ 2íšŒ ë˜ëŠ” ì£¼ 2ì¼ ì—­ì¹˜ ì§‘ì¤‘. ì –ì‚° ì—­ì¹˜ ê·¹ëŒ€í™”ì— íŠ¹í™”ëœ ìµœì‹  í›ˆë ¨ë²•ì…ë‹ˆë‹¤.',
    weeklyStructure: 'ì—­ì¹˜ ì„¸ì…˜ 2ì¼ + ì´ì§€ëŸ° 2íšŒ + ë¡±ëŸ° 1íšŒ + íšŒë³µëŸ° 1íšŒ',
    workouts: [
      '<strong>ì—­ì¹˜ ì¸í„°ë²Œ</strong> Z3~Z4, 5ë¶„ x 5~6ì„¸íŠ¸ (ì„¸íŠ¸ ê°„ 90ì´ˆ ì¡°ê¹…)',
      '<strong>25ë¶„ ì—°ì† ì—­ì¹˜ëŸ°</strong> Z3~Z4 ìœ ì§€',
      '<strong>ë”ë¸” ì„¸ì…˜</strong> AM ì—­ì¹˜ëŸ° + PM ì´ì§€ëŸ°',
    ],
    paceGuide: 'ì—­ì¹˜ ì„¸ì…˜ì€ ì‹¬ë°• Z3~Z4 ê¸°ë°˜ (ì –ì‚° ì¸¡ì • ë¶ˆí•„ìš”). ì´ì§€ëŸ°ì€ Z1~Z2. "ì—­ì¹˜ì—ì„œ ì¶©ë¶„íˆ ì˜¤ë˜ ë²„í‹°ê¸°"ê°€ í•µì‹¬.',
    startTip: 'ì£¼ ëŸ¬ë‹ ì¤‘ 1íšŒë¥¼ ì—­ì¹˜ ì¸í„°ë²Œ (5ë¶„ Z4 x 4ì„¸íŠ¸, ì‚¬ì´ 90ì´ˆ ì¡°ê¹…)ë¡œ ë°”ê¿”ë³´ê¸°.',
    diff: 'ë…¸ë¥´ì›¨ì´ ìœ¡ìƒ êµ­ê°€ëŒ€í‘œíŒ€ (ì¸ê²Œë¸Œë¦­ì„¼ í˜•ì œ)ì´ ì‚¬ìš©í•´ ì„¸ê³„ì  ì£¼ëª©. ì—­ì¹˜ ëŠ¥ë ¥ì„ ìµœìš°ì„ ìœ¼ë¡œ ëŒì–´ì˜¬ë¦¼.',
    ref: 'Norwegian Method (Marius Bakken)'
  },
  {
    id: 'pfitzinger', name: 'í”¼ì¹˜ì§„ì €', author: 'Pete Pfitzinger',
    tagline: 'ë§ˆë¼í†¤ ê¸°ë¡ ê°±ì‹ ì„ ìœ„í•œ ê³ ê¸‰ í”„ë¡œê·¸ë¨.',
    level: 'advanced', levelLabel: 'ìƒê¸‰',
    conditions: { ctl: '35+', weeklyKm: '50km+', freq: 'ì£¼ 5íšŒ+' },
    core: 'ê³ ë³¼ë¥¨ + ì—­ì£¼ê¸°í™” (ì´ˆë°˜ LT ì¤‘ì‹¬ â†’ í›„ë°˜ VO2max). ì£¼ì¤‘ ë¯¸ë“œìœ„í¬ ë¡±ëŸ°ì„ í¬í•¨í•©ë‹ˆë‹¤.',
    weeklyStructure: 'EëŸ° 2íšŒ + ë¯¸ë“œìœ„í¬ ë¡±ëŸ° 1íšŒ + LT/VO2max 1íšŒ + ë¡±ëŸ° 1íšŒ + íšŒë³µëŸ° 1íšŒ',
    workouts: [
      '<strong>LTëŸ°</strong> ì—­ì¹˜ í˜ì´ìŠ¤ 40~60ë¶„',
      '<strong>VO2max ì¸í„°ë²Œ</strong> 800m~1200m x 5~6ì„¸íŠ¸',
      '<strong>ë§ˆë¼í†¤ í˜ì´ìŠ¤ ë¡±ëŸ°</strong> 32km ì¤‘ 16kmë¥¼ MPë¡œ',
    ],
    paceGuide: 'LTëŠ” í•˜í”„ë§ˆë¼í†¤ í˜ì´ìŠ¤, VO2maxëŠ” 3~5km ë ˆì´ìŠ¤ í˜ì´ìŠ¤.',
    startTip: 'ì£¼ì¤‘ ìˆ˜ìš”ì¼ì— ë¯¸ë“œìœ„í¬ ë¡±ëŸ° (í‰ì†Œ ë¡±ëŸ°ì˜ 60~70%) 1íšŒ ì¶”ê°€.',
    diff: 'ë§ˆë¼í†¤ íŠ¹í™”. ì—­ì£¼ê¸°í™”ë¡œ ë ˆì´ìŠ¤ê°€ ê°€ê¹Œì›Œì§ˆìˆ˜ë¡ ë” ë‚ ì¹´ë¡œìš´ í›ˆë ¨. ê³ ë³¼ë¥¨ ìš”êµ¬.',
    ref: 'Advanced Marathoning'
  },
  {
    id: 'lydiard', name: 'ë¦¬ë””ì–´ë“œ', author: 'Arthur Lydiard',
    tagline: 'ëª¨ë“  í˜„ëŒ€ í›ˆë ¨ë²•ì˜ ì›ì¡°. ìœ ì‚°ì†Œ ë² ì´ìŠ¤ì˜ ì •ì„.',
    level: 'advanced', levelLabel: 'ìƒê¸‰',
    conditions: { ctl: '45+', weeklyKm: '60km+', freq: 'ì£¼ 6íšŒ+' },
    core: 'ìœ ì‚°ì†Œ ë² ì´ìŠ¤ (10~14ì£¼) â†’ í (4ì£¼) â†’ ì¸í„°ë²Œ (4ì£¼) â†’ ìƒ¤í”„ë‹ (4ì£¼) ìˆœì„œ ì£¼ê¸°í™”.',
    weeklyStructure: 'ìœ ì‚°ì†ŒëŸ° 5íšŒ + ë¡±ëŸ° 1íšŒ (ìµœëŒ€ 2.5ì‹œê°„) + íšŒë³µëŸ° 1íšŒ',
    workouts: [
      '<strong>ìœ ì‚°ì†Œ ë² ì´ìŠ¤</strong> ì£¼ 100ë§ˆì¼(160km)ê¹Œì§€ ì ì§„ì  ì¦ê°€',
      '<strong>í íŠ¸ë ˆì´ë‹</strong> ë°”ìš´ë”© / ìŠ¤í”„ë§ì‰',
      '<strong>ì¸í„°ë²Œ</strong> íŠ¸ë™ ì„¸ì…˜, íƒ€ì„ íŠ¸ë¼ì´ì–¼',
    ],
    paceGuide: 'ë² ì´ìŠ¤ê¸°ëŠ” "ê°•í•œ ìœ ì‚°ì†Œ" (Z2 ìƒë‹¨~Z3 í•˜ë‹¨). ì¸í„°ë²Œê¸°ëŠ” ë ˆì´ìŠ¤ í˜ì´ìŠ¤ ê¸°ë°˜.',
    startTip: 'í˜„ì¬ ì£¼ê°„ ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ë˜, ëª¨ë“  ëŸ¬ë‹ì„ ìœ ì‚°ì†Œ ê°•ë„ (Z2)ë¡œ í†µì¼.',
    diff: 'ëª¨ë“  í˜„ëŒ€ í›ˆë ¨ë²•ì˜ ì›ì¡°. ê·¹ë‹¨ì  ìœ ì‚°ì†Œ ë² ì´ìŠ¤ êµ¬ì¶• í›„ ìŠ¤í”¼ë“œ ì¶”ê°€. ê³ ë³¼ë¥¨ í•„ìˆ˜.',
    ref: 'Running with Lydiard'
  },
];

function esc(s) { var d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

function renderNav() {
  var nav = document.getElementById('method-nav');
  var html = '';
  for (var i = 0; i < METHODS.length; i++) {
    html += '<div class="nav-pill' + (i === 0 ? ' active' : '') + '" data-idx="' + i + '">' + esc(METHODS[i].name) + '</div>';
  }
  nav.innerHTML = html;
  nav.addEventListener('click', function(e) {
    var pill = e.target.closest('.nav-pill');
    if (!pill) return;
    var idx = parseInt(pill.dataset.idx);
    showMethod(idx);
    nav.querySelectorAll('.nav-pill').forEach(function(p) { p.classList.remove('active'); });
    pill.classList.add('active');
    pill.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
  });
}

function renderMethod(m) {
  var levelClass = m.level === 'beginner' ? 'level-beginner' : m.level === 'intermediate' ? 'level-intermediate' : 'level-advanced';

  var workoutsHtml = '';
  for (var i = 0; i < m.workouts.length; i++) {
    workoutsHtml += '<li class="workout-item">' + m.workouts[i] + '</li>';
  }

  return '<div class="card">' +
    '<div class="method-header">' +
      '<div class="method-name">' + esc(m.name) + '</div>' +
      '<div class="method-author">' + esc(m.author) + '</div>' +
      '<div class="method-tagline">' + esc(m.tagline) + '</div>' +
      '<span class="method-level ' + levelClass + '">' + esc(m.levelLabel) + '</span>' +
    '</div>' +
    '<div class="info-row">' +
      '<div class="info-box"><div class="info-box-label">ì²´ë ¥ì§€ìˆ˜</div><div class="info-box-value">' + esc(m.conditions.ctl) + '</div></div>' +
      '<div class="info-box"><div class="info-box-label">ì£¼ê°„ ê±°ë¦¬</div><div class="info-box-value">' + esc(m.conditions.weeklyKm) + '</div></div>' +
      '<div class="info-box"><div class="info-box-label">ë¹ˆë„</div><div class="info-box-value">' + esc(m.conditions.freq) + '</div></div>' +
    '</div>' +
  '</div>' +

  '<div class="card">' +
    '<div class="section-title"><span class="icon">ğŸ¯</span> í•µì‹¬ ì›ë¦¬</div>' +
    '<div class="desc-text">' + esc(m.core) + '</div>' +
  '</div>' +

  '<div class="card">' +
    '<div class="section-title"><span class="icon">ğŸ“‹</span> ì£¼ê°„ êµ¬ì¡°</div>' +
    '<div class="desc-text">' + esc(m.weeklyStructure) + '</div>' +
    '<div style="margin-top:12px"><div class="section-title"><span class="icon">ğŸ’ª</span> í•µì‹¬ ì›Œí¬ì•„ì›ƒ</div>' +
    '<ul class="workout-list">' + workoutsHtml + '</ul></div>' +
  '</div>' +

  '<div class="card">' +
    '<div class="section-title"><span class="icon">â±</span> í˜ì´ìŠ¤ ê°€ì´ë“œ</div>' +
    '<div class="pace-guide">' + esc(m.paceGuide) + '</div>' +
  '</div>' +

  '<div class="card">' +
    '<div class="section-title"><span class="icon">ğŸš€</span> ì´ë²ˆ ì£¼ ì‹œì‘ë²•</div>' +
    '<div class="start-tip">' + esc(m.startTip) + '</div>' +
  '</div>' +

  '<div class="card">' +
    '<div class="section-title"><span class="icon">âœ¨</span> ì°¨ë³„ì </div>' +
    '<div class="diff-text">' + esc(m.diff) + '</div>' +
    '<div class="ref-text">ì°¸ê³ : ' + esc(m.ref) + '</div>' +
  '</div>' +

  (userId && !isFromSurvey ? '<div class="select-btn-wrap"><button class="select-btn" id="select-btn" onclick="selectMethod(\'' + m.id + '\')">' + esc(m.name) + ' ì ìš©í•˜ê¸°</button></div>' : '') +
  (isFromSurvey ? '<div class="select-btn-wrap"><button class="select-btn" onclick="history.back()" style="background:#6b7280">ì„¤ë¬¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></div>' : '');
}

function showMethod(idx) {
  var content = document.getElementById('method-content');
  content.innerHTML = '<div class="method-detail active">' + renderMethod(METHODS[idx]) + '</div>';
}

// URLì—ì„œ method ID íŒŒë¼ë¯¸í„° í™•ì¸
var params = new URLSearchParams(window.location.search);
var isFromSurvey = params.get('from') === 'survey';
var targetId = params.get('id');
var startIdx = 0;
if (targetId) {
  for (var i = 0; i < METHODS.length; i++) {
    if (METHODS[i].id === targetId) { startIdx = i; break; }
  }
}

renderNav();
showMethod(startIdx);

// í•´ë‹¹ pill í™œì„±í™” + ìŠ¤í¬ë¡¤
var pills = document.querySelectorAll('.nav-pill');
pills.forEach(function(p) { p.classList.remove('active'); });
if (pills[startIdx]) {
  pills[startIdx].classList.add('active');
  setTimeout(function() { pills[startIdx].scrollIntoView({ inline: 'center', block: 'nearest' }); }, 100);
}
</script>
</body>
</html>
